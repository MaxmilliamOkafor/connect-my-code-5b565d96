var et=Object.defineProperty;var rt=(j,N,R)=>N in j?et(j,N,{enumerable:!0,configurable:!0,writable:!0,value:R}):j[N]=R;var er=(j,N,R)=>(rt(j,typeof N!="symbol"?N+"":N,R),R);(function(){"use strict";var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R={exports:{}};(function(e,r){(function(t,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:j,function(t){var n,a;if(!((a=(n=globalThis.chrome)==null?void 0:n.runtime)!=null&&a.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const l="The message port closed before a response was received.",o=g=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class d extends WeakMap{constructor(i,c=void 0){super(c),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const f=s=>s&&typeof s=="object"&&typeof s.then=="function",b=(s,i)=>(...c)=>{g.runtime.lastError?s.reject(new Error(g.runtime.lastError.message)):i.singleCallbackArg||c.length<=1&&i.singleCallbackArg!==!1?s.resolve(c[0]):s.resolve(c)},T=s=>s==1?"argument":"arguments",v=(s,i)=>function(u,...x){if(x.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${T(i.minArgs)} for ${s}(), got ${x.length}`);if(x.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${T(i.maxArgs)} for ${s}(), got ${x.length}`);return new Promise((w,E)=>{if(i.fallbackToNoCallback)try{u[s](...x,b({resolve:w,reject:E},i))}catch(m){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),u[s](...x),i.fallbackToNoCallback=!1,i.noCallback=!0,w()}else i.noCallback?(u[s](...x),w()):u[s](...x,b({resolve:w,reject:E},i))})},y=(s,i,c)=>new Proxy(i,{apply(u,x,w){return c.call(x,s,...w)}});let k=Function.call.bind(Object.prototype.hasOwnProperty);const h=(s,i={},c={})=>{let u=Object.create(null),x={has(E,m){return m in s||m in u},get(E,m,_){if(m in u)return u[m];if(!(m in s))return;let p=s[m];if(typeof p=="function")if(typeof i[m]=="function")p=y(s,s[m],i[m]);else if(k(c,m)){let O=v(m,c[m]);p=y(s,s[m],O)}else p=p.bind(s);else if(typeof p=="object"&&p!==null&&(k(i,m)||k(c,m)))p=h(p,i[m],c[m]);else if(k(c,"*"))p=h(p,i[m],c["*"]);else return Object.defineProperty(u,m,{configurable:!0,enumerable:!0,get(){return s[m]},set(O){s[m]=O}}),p;return u[m]=p,p},set(E,m,_,p){return m in u?u[m]=_:s[m]=_,!0},defineProperty(E,m,_){return Reflect.defineProperty(u,m,_)},deleteProperty(E,m){return Reflect.deleteProperty(u,m)}},w=Object.create(s);return new Proxy(w,x)},S=s=>({addListener(i,c,...u){i.addListener(s.get(c),...u)},hasListener(i,c){return i.hasListener(s.get(c))},removeListener(i,c){i.removeListener(s.get(c))}}),F=new d(s=>typeof s!="function"?s:function(c){const u=h(c,{},{getContent:{minArgs:0,maxArgs:0}});s(u)}),U=new d(s=>typeof s!="function"?s:function(c,u,x){let w=!1,E,m=new Promise(D=>{E=function(I){w=!0,D(I)}}),_;try{_=s(c,u,E)}catch(D){_=Promise.reject(D)}const p=_!==!0&&f(_);if(_!==!0&&!p&&!w)return!1;const O=D=>{D.then(I=>{x(I)},I=>{let V;I&&(I instanceof Error||typeof I.message=="string")?V=I.message:V="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:V})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return O(p?_:m),!0}),Ee=({reject:s,resolve:i},c)=>{g.runtime.lastError?g.runtime.lastError.message===l?i():s(new Error(g.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?s(new Error(c.message)):i(c)},te=(s,i,c,...u)=>{if(u.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${T(i.minArgs)} for ${s}(), got ${u.length}`);if(u.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${T(i.maxArgs)} for ${s}(), got ${u.length}`);return new Promise((x,w)=>{const E=Ee.bind(null,{resolve:x,reject:w});u.push(E),c.sendMessage(...u)})},_e={devtools:{network:{onRequestFinished:S(F)}},runtime:{onMessage:S(U),onMessageExternal:S(U),sendMessage:te.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:te.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},q={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":q},services:{"*":q},websites:{"*":q}},h(g,_e,A)};t.exports=o(chrome)}else t.exports=globalThis.browser})})(R);var $=R.exports;const C=N($);var ue={exports:{}};const rr=e=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{const r=crypto.getRandomValues(new Uint8Array(1))[0];return(r>=e?r%e:r).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),ke=(e=7,r=!1)=>Array.from({length:e},rr(r?16:36)).join("");ue.exports=ke,ue.exports.default=ke;var tr=ue.exports;const ne=N(tr);var nr=()=>`uid::${ne(7)}`,sr=(e,r=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&r.every(t=>t in e),or=e=>{try{const r=JSON.parse(e);return sr(r)?r:null}catch{return null}},ir=()=>{let e=[];return{add:(...r)=>{e=[...e,...r]},remove:r=>{e=typeof r=="string"?e.filter(t=>t.message.transactionId!==r):e.filter(t=>!r.includes(t))},entries:()=>e}},K=class{static toBackground(e,r){return e.postMessage(r)}static toExtensionContext(e,r){return e.postMessage(r)}},ar=Object.defineProperty,gr=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,Se=(e,r,t)=>r in e?ar(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,L=(e,r)=>{for(var t in r||(r={}))mr.call(r,t)&&Se(e,t,r[t]);if(Te)for(var t of Te(r))cr.call(r,t)&&Se(e,t,r[t]);return e},de=(e,r)=>gr(e,lr(r)),Ar=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,fe=e=>{const[,r,t,n]=e.match(Ar)||[];return{context:r,tabId:+t,frameId:n?+n:void 0}},se=({context:e,tabId:r,frameId:t})=>["background","popup","options"].includes(e)?e:`${e}@${r}${t?`.${t}`:""}`;const ur=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],pe=Symbol(".toJSON was called"),dr=e=>{e[pe]=!0;const r=e.toJSON();return delete e[pe],r},Ie=({from:e,seen:r,to_:t,forceEnumerable:n,maxDepth:a,depth:l})=>{const o=t||(Array.isArray(e)?[]:{});if(r.push(e),l>=a)return o;if(typeof e.toJSON=="function"&&e[pe]!==!0)return dr(e);for(const[g,A]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(A)){o[g]="[object Buffer]";continue}if(A!==null&&typeof A=="object"&&typeof A.pipe=="function"){o[g]="[object Stream]";continue}if(typeof A!="function"){if(!A||typeof A!="object"){o[g]=A;continue}if(!r.includes(e[g])){l++,o[g]=Ie({from:e[g],seen:[...r],forceEnumerable:n,maxDepth:a,depth:l});continue}o[g]="[Circular]"}}for(const{property:g,enumerable:A}of ur)typeof e[g]=="string"&&Object.defineProperty(o,g,{value:e[g],enumerable:n?!0:A,configurable:!0,writable:!0});return o};function fr(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=r;return typeof e=="object"&&e!==null?Ie({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}let Ce=()=>({events:{},emit(e,...r){(this.events[e]||[]).forEach(t=>t(...r))},on(e,r){return(this.events[e]=this.events[e]||[]).push(r),()=>this.events[e]=(this.events[e]||[]).filter(t=>t!==r)}});var pr=(e,r,t)=>{const n=ne(),a=new Map,l=new Map,o=g=>{if(g.destination.context===e&&!g.destination.frameId&&!g.destination.tabId){t==null||t(g);const{transactionId:A,messageID:d,messageType:f}=g,b=()=>{const v=a.get(A);if(v){const{err:y,data:k}=g;if(y){const h=y,S=self[h.name],F=new(typeof S=="function"?S:Error)(h.message);for(const U in h)F[U]=h[U];v.reject(F)}else v.resolve(k);a.delete(A)}},T=async()=>{let v,y,k=!1;try{const h=l.get(d);if(typeof h=="function")v=await h({sender:g.origin,id:d,data:g.data,timestamp:g.timestamp});else throw k=!0,new Error(`[webext-bridge] No handler registered in '${e}' to accept messages with id '${d}'`)}catch(h){y=h}finally{if(y&&(g.err=fr(y)),o(de(L({},g),{messageType:"reply",data:v,origin:{context:e,tabId:null},destination:g.origin,hops:[]})),y&&!k)throw v}};switch(f){case"reply":return b();case"message":return T()}}return g.hops.push(`${e}::${n}`),r(g)};return{handleMessage:o,endTransaction:g=>{const A=a.get(g);A==null||A.reject("Transaction was ended before it could complete"),a.delete(g)},sendMessage:(g,A,d="background")=>{const f=typeof d=="string"?fe(d):d,b="Bridge#sendMessage ->";if(!f.context)throw new TypeError(`${b} Destination must be any one of known destinations`);return new Promise((T,v)=>{const y={messageID:g,data:A,destination:f,messageType:"message",transactionId:ne(),origin:{context:e,tabId:null},hops:[],timestamp:Date.now()};a.set(y.transactionId,{resolve:T,reject:v});try{o(y)}catch(k){a.delete(y.transactionId),v(k)}})},onMessage:(g,A)=>(l.set(g,A),()=>l.delete(g))}},J=class{constructor(e,r){this.endpointRuntime=e,this.streamInfo=r,this.emitter=Ce(),this.isClosed=!1,this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},J.initDone||(e.onMessage("__crx_bridge_stream_transfer__",t=>{const{streamId:n,streamTransfer:a,action:l}=t.data,o=J.openStreams.get(n);o&&!o.isClosed&&(l==="transfer"&&o.emitter.emit("message",a),l==="close"&&(J.openStreams.delete(n),o.handleStreamClose()))}),J.initDone=!0),J.openStreams.set(this.streamInfo.streamId,this)}get info(){return this.streamInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:e,action:"transfer"},this.streamInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:null,action:"close"},this.streamInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,r){const t=this.emitter.on(e,r);return Object.assign(t,{dispose:t,close:t})}},oe=J;oe.initDone=!1,oe.openStreams=new Map;var xr=e=>{const r=new Map,t=new Map,n=Ce();e.onMessage("__crx_bridge_stream_open__",o=>new Promise(g=>{const{sender:A,data:d}=o,{channel:f}=d;let b=!1,T=()=>{};const v=()=>{const y=t.get(f);typeof y=="function"?(y(new oe(e,de(L({},d),{endpoint:A}))),b&&T(),g(!0)):b||(b=!0,T=n.on("did-change-stream-callbacks",v))};v()}));async function a(o,g){if(r.has(o))throw new Error("webext-bridge: A Stream is already open at this channel");const A=typeof g=="string"?fe(g):g,d={streamId:ne(),channel:o,endpoint:A},f=new oe(e,d);return f.onClose(()=>r.delete(o)),await e.sendMessage("__crx_bridge_stream_open__",d,A),r.set(o,f),f}function l(o,g){if(t.has(o))throw new Error("webext-bridge: This channel has already been claimed. Stream allows only one-on-one communication");t.set(o,g),n.emit("did-change-stream-callbacks")}return{openStream:a,onOpenStreamChannel:l}},Me={exports:{}};(function(e,r){(function(t,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:j,function(t){if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",a="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",l=o=>{const g={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(g).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class A extends WeakMap{constructor(i,c=void 0){super(c),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const d=s=>s&&typeof s=="object"&&typeof s.then=="function",f=(s,i)=>(...c)=>{o.runtime.lastError?s.reject(new Error(o.runtime.lastError.message)):i.singleCallbackArg||c.length<=1&&i.singleCallbackArg!==!1?s.resolve(c[0]):s.resolve(c)},b=s=>s==1?"argument":"arguments",T=(s,i)=>function(u,...x){if(x.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${b(i.minArgs)} for ${s}(), got ${x.length}`);if(x.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${b(i.maxArgs)} for ${s}(), got ${x.length}`);return new Promise((w,E)=>{if(i.fallbackToNoCallback)try{u[s](...x,f({resolve:w,reject:E},i))}catch(m){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),u[s](...x),i.fallbackToNoCallback=!1,i.noCallback=!0,w()}else i.noCallback?(u[s](...x),w()):u[s](...x,f({resolve:w,reject:E},i))})},v=(s,i,c)=>new Proxy(i,{apply(u,x,w){return c.call(x,s,...w)}});let y=Function.call.bind(Object.prototype.hasOwnProperty);const k=(s,i={},c={})=>{let u=Object.create(null),x={has(E,m){return m in s||m in u},get(E,m,_){if(m in u)return u[m];if(!(m in s))return;let p=s[m];if(typeof p=="function")if(typeof i[m]=="function")p=v(s,s[m],i[m]);else if(y(c,m)){let O=T(m,c[m]);p=v(s,s[m],O)}else p=p.bind(s);else if(typeof p=="object"&&p!==null&&(y(i,m)||y(c,m)))p=k(p,i[m],c[m]);else if(y(c,"*"))p=k(p,i[m],c["*"]);else return Object.defineProperty(u,m,{configurable:!0,enumerable:!0,get(){return s[m]},set(O){s[m]=O}}),p;return u[m]=p,p},set(E,m,_,p){return m in u?u[m]=_:s[m]=_,!0},defineProperty(E,m,_){return Reflect.defineProperty(u,m,_)},deleteProperty(E,m){return Reflect.deleteProperty(u,m)}},w=Object.create(s);return new Proxy(w,x)},h=s=>({addListener(i,c,...u){i.addListener(s.get(c),...u)},hasListener(i,c){return i.hasListener(s.get(c))},removeListener(i,c){i.removeListener(s.get(c))}}),S=new A(s=>typeof s!="function"?s:function(c){const u=k(c,{},{getContent:{minArgs:0,maxArgs:0}});s(u)});let F=!1;const U=new A(s=>typeof s!="function"?s:function(c,u,x){let w=!1,E,m=new Promise(D=>{E=function(I){F||(console.warn(a,new Error().stack),F=!0),w=!0,D(I)}}),_;try{_=s(c,u,E)}catch(D){_=Promise.reject(D)}const p=_!==!0&&d(_);if(_!==!0&&!p&&!w)return!1;const O=D=>{D.then(I=>{x(I)},I=>{let V;I&&(I instanceof Error||typeof I.message=="string")?V=I.message:V="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:V})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return O(p?_:m),!0}),Ee=({reject:s,resolve:i},c)=>{o.runtime.lastError?o.runtime.lastError.message===n?i():s(new Error(o.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?s(new Error(c.message)):i(c)},te=(s,i,c,...u)=>{if(u.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${b(i.minArgs)} for ${s}(), got ${u.length}`);if(u.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${b(i.maxArgs)} for ${s}(), got ${u.length}`);return new Promise((x,w)=>{const E=Ee.bind(null,{resolve:x,reject:w});u.push(E),c.sendMessage(...u)})},_e={devtools:{network:{onRequestFinished:h(S)}},runtime:{onMessage:h(U),onMessageExternal:h(U),sendMessage:te.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:te.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},q={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return g.privacy={network:{"*":q},services:{"*":q},websites:{"*":q}},k(o,_e,g)};t.exports=l(chrome)}else t.exports=globalThis.browser})})(Me);var hr=Me.exports;const br=N(hr);var H=ir(),M=new Map,Z=new Map,ie=new Map,Oe=(e,r)=>(Z.set(e,(Z.get(e)||new Set).add(r)),()=>{const t=Z.get(e);t!=null&&t.delete(r)&&(t==null?void 0:t.size)===0&&Z.delete(e)}),Ne=(e,r)=>{ie.set(e,(ie.get(e)||new Set).add(r))},W=e=>({withFingerprint:r=>{const t=a=>({and:()=>a}),n={aboutIncomingMessage:a=>{const l=M.get(e);return K.toExtensionContext(l.port,{status:"incoming",message:a}),t(n)},aboutSuccessfulDelivery:a=>{const l=M.get(e);return K.toExtensionContext(l.port,{status:"delivered",receipt:a}),t(n)},aboutMessageUndeliverability:(a,l)=>{const o=M.get(e);return(o==null?void 0:o.fingerprint)===r&&K.toExtensionContext(o.port,{status:"undeliverable",resolvedDestination:a,message:l}),t(n)},whenDeliverableTo:a=>{const l=()=>{const o=M.get(e);if((o==null?void 0:o.fingerprint)===r&&M.has(a))return K.toExtensionContext(o.port,{status:"deliverable",deliverableTo:a}),!0};if(!l()){const o=Oe(a,l);Ne(r,o)}return t(n)},aboutSessionEnded:a=>{const l=M.get(e);return(l==null?void 0:l.fingerprint)===r&&K.toExtensionContext(l.port,{status:"terminated",fingerprint:a}),t(n)}};return n}}),yr=nr(),ae=pr("background",e=>{var r;if(e.origin.context==="background"&&["content-script","devtools "].includes(e.destination.context)&&!e.destination.tabId)throw new TypeError("When sending messages from background page, use @tabId syntax to target specific tab");const t=se(L(L({},e.origin),e.origin.context==="window"&&{context:"content-script"})),n=se(de(L(L({},e.destination),e.destination.context==="window"&&{context:"content-script"}),{tabId:e.destination.tabId||e.origin.tabId}));e.destination.tabId=null,e.destination.frameId=null;const a=()=>M.get(n),l=()=>M.get(t),o=()=>{var g;W(n).withFingerprint(a().fingerprint).aboutIncomingMessage(e);const A={message:e,to:a().fingerprint,from:{endpointId:t,fingerprint:(g=l())==null?void 0:g.fingerprint}};e.messageType==="message"&&H.add(A),e.messageType==="reply"&&H.remove(e.messageID),l()&&W(t).withFingerprint(l().fingerprint).aboutSuccessfulDelivery(A)};(r=a())!=null&&r.port?o():e.messageType==="message"&&(e.origin.context==="background"?Oe(n,o):l()&&W(t).withFingerprint(l().fingerprint).aboutMessageUndeliverability(n,e).and().whenDeliverableTo(n))},e=>{const r=se(L(L({},e.origin),e.origin.context==="window"&&{context:"content-script"})),t=M.get(r),n={message:e,to:yr,from:{endpointId:r,fingerprint:t.fingerprint}};W(r).withFingerprint(t.fingerprint).aboutSuccessfulDelivery(n)});br.runtime.onConnect.addListener(e=>{var r;const t=or(e.name);if(!t)return;t.endpointName||(t.endpointName=se({context:"content-script",tabId:e.sender.tab.id,frameId:e.sender.frameId}));const{tabId:n,frameId:a}=fe(t.endpointName);M.set(t.endpointName,{fingerprint:t.fingerprint,port:e}),(r=Z.get(t.endpointName))==null||r.forEach(l=>l()),Z.delete(t.endpointName),Ne(t.fingerprint,()=>{const l=H.entries().filter(o=>o.to===t.fingerprint);H.remove(l),l.forEach(o=>{o.from.endpointId==="background"?ae.endTransaction(o.message.transactionId):W(o.from.endpointId).withFingerprint(o.from.fingerprint).aboutSessionEnded(t.fingerprint)})}),e.onDisconnect.addListener(()=>{var l,o;((l=M.get(t.endpointName))==null?void 0:l.fingerprint)===t.fingerprint&&M.delete(t.endpointName),(o=ie.get(t.fingerprint))==null||o.forEach(g=>g()),ie.delete(t.fingerprint)}),e.onMessage.addListener(l=>{var o,g;if(l.type==="sync"){const A=[...M.values()].map(f=>f.fingerprint),d=l.pendingResponses.filter(f=>A.includes(f.to));H.add(...d),l.pendingResponses.filter(f=>!A.includes(f.to)).forEach(f=>W(t.endpointName).withFingerprint(t.fingerprint).aboutSessionEnded(f.to)),l.pendingDeliveries.forEach(f=>W(t.endpointName).withFingerprint(t.fingerprint).whenDeliverableTo(f));return}l.type==="deliver"&&((g=(o=l.message)==null?void 0:o.origin)!=null&&g.context)&&(l.message.origin.tabId=n,l.message.origin.frameId=a,ae.handleMessage(l.message))})});var{sendMessage:Pe,onMessage:ge}=ae;xr(ae);function wr(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function De(e){const r=wr(e);return r.setHours(0,0,0,0),r}function vr(e,r){const t=De(e),n=De(r);return+t==+n}const xe="https://www.froghire.ai/api",Er=`${xe}/v1/user/refresh_token`,_r=`${xe}/v1/user/get`,kr=`${xe}/v1/profile/all`,Tr="fetch",Sr="ga",Ir="get-authtoken",Cr="refresh-authtoken",Mr="content-menu",$e="user-state-update",Y="https://www.froghire.ai",Fe="https://www.f1hire.com",je=".froghire.ai",z=class z{};z.id=C.runtime.id,z.version=C.runtime.getManifest().version,z.platform=/Edg\/\d./i.test(navigator.userAgent)?"edge":"chrome",z.isChrome=z.platform==="chrome";let P=z;const Or="https://www.google-analytics.com/mp/collect",Nr="https://www.google-analytics.com/debug/mp/collect",Pr="G-EMPK2W307S",Dr="vIgtNDz3RzGABD-4Do5NZA",$r=100,Fr=30;class jr{async getOrCreateClientId(){let{clientId:r}=await $.storage.local.get("clientId");return r||(r=crypto.randomUUID(),await $.storage.local.set({clientId:r})),r}async getOrCreateSessionId(){let{sessionData:r}=await $.storage.session.get("sessionData");const t=Date.now();return r&&r.timestamp&&((t-r.timestamp)/6e4>Fr?r=null:(r.timestamp=t,await $.storage.session.set({sessionData:r}))),r||(r={session_id:t.toString(),timestamp:t.toString()},await $.storage.session.set({sessionData:r})),r.session_id}async fireEvent(r,t,n,a){try{const l={client_id:await this.getOrCreateClientId(),user_id:n,events:[{name:r,params:{session_id:await this.getOrCreateSessionId(),engagement_time_msec:$r,ext_version:P.version,...t}}]},o=await fetch(`${a?Nr:Or}?measurement_id=${Pr}&api_secret=${Dr}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!a)return;console.log(await o.text())}catch(l){console.error("Google Analytics request failed with an exception",l)}}}const Re=new jr,G="__fh_user_auth_token",Le="token",Be="token_ct",le={token:"",expire:0,token_ct:0,init:!0};let B={...le,init:!1};C.storage.local.onChanged.addListener(e=>{if(e[G]){const r=JSON.parse(e[G].newValue);r.init&&((!r.token||r.token!==B.token)&&Lr(r),B=r)}});async function Ue(e){const r={...le},t=await C.cookies.getAll({url:e});for(const n of t)if(n.name===Le)r.token=n.value,r.expire=n.expirationDate||0;else if(n.name===Be){const a=n.value?Number.parseInt(n.value):0;r.token_ct=Number.isNaN(a)?0:a}return r}function We(e,r){const t=Date.now(),n={token:e,expire:r,token_ct:t,init:!0};B=n,$.storage.local.set({[G]:JSON.stringify(n)}),C.cookies.set({url:Y,domain:je,name:Le,value:e,expirationDate:r}),C.cookies.set({url:Y,domain:je,name:Be,value:t.toString(),expirationDate:r})}async function Rr(){try{const r=(await $.storage.local.get(G))[G],t=r?JSON.parse(r):{};if(t&&t.token&&t.expire>Math.floor(Date.now()/1e3))return t}catch(r){console.error("Failed to load auth token from storage:",r)}try{const r=[Y,Fe];for(const t of r){const n=await Ue(t);if(n!=null&&n.token)return n}}catch(r){console.error("Failed to load auth token from cookies:",r)}return{...le,init:!1}}async function Q(){if(B.token&&B.expire>Math.floor(Date.now()/1e3))return B;let e=!0;try{const t=(await $.storage.local.get(G))[G],n=t?JSON.parse(t):{};if(n&&n.token&&n.expire>Math.floor(Date.now()/1e3))return B=n,n}catch(t){console.error("Failed to load auth token from storage:",t),e=!1}try{const t=[Y,Fe];for(const n of t){const a=await Ue(n);if(a!=null&&a.token)return B=a,a}e=!0}catch(t){console.error("Failed to load auth token from cookies:",t),e=!1}return{...le,init:e}}async function Lr(e){(!e||!e.token||e.expire<Math.floor(Date.now()/1e3))&&Ge({userInfo:null,profile:null,error:"Token invalid or expired"},e);const r={"Content-Type":"application/json",Authorization:`Bearer ${e.token}`,"X-Fh-Version":P.version,"X-Fh-Type":"extension","X-Fh-Platform":P.platform,"X-Fh-Tz":Intl.DateTimeFormat().resolvedOptions().timeZone},t={is_archived:"false"},n=[fetch(_r,{method:"GET",headers:r}).then(a=>a.json()).then(a=>({userInfo:a.code===0?a.data:null})).catch(a=>({userInfo:null,error:a.message})),fetch(`${kr}?${new URLSearchParams(t).toString()}`,{method:"GET",headers:r}).then(a=>a.json()).then(a=>({profile:a.code===0?a.data:null})).catch(a=>({profile:null,error:a.message}))];try{const l=(await Promise.all(n)).reduce((o,g)=>({...o,...g}),{});Ge(l,e)}catch(a){console.error("fetchUserData failed:",a)}}async function Ge(e,r){const t={authToken:r,userData:e};(await C.tabs.query({})).forEach(a=>{a.id&&Pe($e,{payload:t},{context:"content-script",tabId:a.id}).catch(l=>{console.warn(`Message ${$e} not delivered to tab ${a.id} (no handler).`)})})}const Br=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Ur=new Map(Br);class he extends Error{constructor(t){super(he._prepareSuperMessage(t));er(this,"name","NonError")}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}}const Wr=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],be=new WeakSet,Gr=e=>{be.add(e);const r=e.toJSON();return be.delete(e),r},Xe=e=>Ur.get(e)??Error,ye=({from:e,seen:r,to:t,forceEnumerable:n,maxDepth:a,depth:l,useToJSON:o,serialize:g})=>{if(!t)if(Array.isArray(e))t=[];else if(!g&&ze(e)){const d=Xe(e.name);t=new d}else t={};if(r.push(e),l>=a)return t;if(o&&typeof e.toJSON=="function"&&!be.has(e))return Gr(e);const A=d=>ye({from:d,seen:[...r],forceEnumerable:n,maxDepth:a,depth:l,useToJSON:o,serialize:g});for(const[d,f]of Object.entries(e)){if(f&&f instanceof Uint8Array&&f.constructor.name==="Buffer"){t[d]="[object Buffer]";continue}if(f!==null&&typeof f=="object"&&typeof f.pipe=="function"){t[d]="[object Stream]";continue}if(typeof f!="function"){if(!f||typeof f!="object"){try{t[d]=f}catch{}continue}if(!r.includes(e[d])){l++,t[d]=A(e[d]);continue}t[d]="[Circular]"}}for(const{property:d,enumerable:f}of Wr)typeof e[d]<"u"&&e[d]!==null&&Object.defineProperty(t,d,{value:ze(e[d])?A(e[d]):e[d],enumerable:n?!0:f,configurable:!0,writable:!0});return t};function Xr(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:n=!0}=r;return typeof e=="object"&&e!==null?ye({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function zr(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(qr(e)){const n=Xe(e.name);return ye({from:e,seen:[],to:new n,maxDepth:t,depth:0,serialize:!1})}return new he(e)}function ze(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function qr(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var Vr=Object.defineProperty,Jr=Object.defineProperties,Zr=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,Je=(e,r,t)=>r in e?Vr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ee=(e,r)=>{for(var t in r||(r={}))qe.call(r,t)&&Je(e,t,r[t]);if(me)for(var t of me(r))Ve.call(r,t)&&Je(e,t,r[t]);return e},re=(e,r)=>Jr(e,Zr(r)),Kr=(e,r)=>{var t={};for(var n in e)qe.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&me)for(var n of me(e))r.indexOf(n)<0&&Ve.call(e,n)&&(t[n]=e[n]);return t},Ze=(e,r,t)=>new Promise((n,a)=>{var l=A=>{try{g(t.next(A))}catch(d){a(d)}},o=A=>{try{g(t.throw(A))}catch(d){a(d)}},g=A=>A.done?n(A.value):Promise.resolve(A.value).then(l,o);g((t=t.apply(e,r)).next())});function Ke(e){let r,t={};function n(){Object.entries(t).length===0&&(r==null||r(),r=void 0)}let a=Math.floor(Math.random()*1e4);function l(){return a++}return{sendMessage(o,g,...A){return Ze(this,null,function*(){var d,f,b,T;const v={id:l(),type:o,data:g,timestamp:Date.now()},y=(f=yield(d=e.verifyMessageData)==null?void 0:d.call(e,v))!=null?f:v;(b=e.logger)==null||b.debug(`[messaging] sendMessage {id=${y.id}} ─ᐅ`,y,...A);const k=yield e.sendMessage(y,...A),{res:h,err:S}=k??{err:new Error("No response")};if((T=e.logger)==null||T.debug(`[messaging] sendMessage {id=${y.id}} ᐊ─`,{res:h,err:S}),S!=null)throw zr(S);return h})},onMessage(o,g){var A,d,f;if(r==null&&((A=e.logger)==null||A.debug(`[messaging] "${o}" initialized the message listener for this context`),r=e.addRootListener(b=>{var T,v;if(typeof b.type!="string"||typeof b.timestamp!="number"){if(e.breakError)return;const h=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(b)}`);throw(T=e.logger)==null||T.error(h),h}(v=e==null?void 0:e.logger)==null||v.debug("[messaging] Received message",b);const y=t[b.type];if(y==null)return;const k=y(b);return Promise.resolve(k).then(h=>{var S,F;return(F=(S=e.verifyMessageData)==null?void 0:S.call(e,h))!=null?F:h}).then(h=>{var S;return(S=e==null?void 0:e.logger)==null||S.debug(`[messaging] onMessage {id=${b.id}} ─ᐅ`,{res:h}),{res:h}}).catch(h=>{var S;return(S=e==null?void 0:e.logger)==null||S.debug(`[messaging] onMessage {id=${b.id}} ─ᐅ`,{err:h}),{err:Xr(h)}})})),t[o]!=null){const b=Error(`[messaging] In this JS context, only one listener can be setup for ${o}`);throw(d=e.logger)==null||d.error(b),b}return t[o]=g,(f=e.logger)==null||f.log(`[messaging] Added listener for ${o}`),()=>{delete t[o],n()}},removeAllListeners(){Object.keys(t).forEach(o=>{delete t[o]}),n()}}}function Hr(e){return Ke(re(ee({},e),{sendMessage(r,t){return t==null?C.runtime.sendMessage(r):C.tabs.sendMessage(t,r)},addRootListener(r){const t=(n,a)=>r(typeof n=="object"?re(ee({},n),{sender:a}):n);return C.runtime.onMessage.addListener(t),()=>C.runtime.onMessage.removeListener(t)}}))}for(var X=256,He=[],Ye=256,ce;X--;)He[X]=(X+256).toString(16).substring(1);function Yr(e){var r=0,t=e||11;if(!ce||X+t>Ye*2)for(ce="",X=0;r<Ye;r++)ce+=He[Math.random()*256|0];return ce.substring(X,X+++t)}function Qe(e,r={targetScope:window??void 0}){return typeof cloneInto<"u"?cloneInto(e,r.targetScope):e}var we="@webext-core/messaging/custom-events",ve="@webext-core/messaging/custom-events/response";function Qr(e){const r=e.namespace,t=Yr(),n=[],a=o=>new Promise(g=>{const A=d=>{const{detail:f}=d;f.namespace===r&&f.instanceId!==t&&f.message.type===o.detail.message.type&&g(f.response)};n.push(()=>window.removeEventListener(ve,A)),window.addEventListener(ve,A),window.dispatchEvent(o)}),l=Ke(re(ee({},e),{sendMessage(o){const g={message:o,namespace:r,instanceId:t},A=new CustomEvent(we,{detail:Qe(g)});return a(A)},addRootListener(o){const g=A=>Ze(this,null,function*(){const d=A,{detail:f}=d,b=Kr(d,["detail"]);if(f.namespace!==r||f.instanceId===t)return;const T=re(ee({},f.message),{event:b}),y={response:yield o(T),message:T,instanceId:t,namespace:r},k=new CustomEvent(ve,{detail:Qe(y)});window.dispatchEvent(k)});return window.addEventListener(we,g),()=>window.removeEventListener(we,g)},verifyMessageData(o){return structuredClone(o)}}));return re(ee({},l),{removeAllListeners(){l.removeAllListeners(),n.forEach(o=>o())}})}const{sendMessage:tt,onMessage:Ae}=Hr();Qr({namespace:$.runtime.id}),Ae("fetch",async({data:e})=>{const r=await Q(),t={"Content-Type":"application/json",Authorization:r.token?`Bearer ${r.token}`:"","X-Fh-Version":P.version,"X-Fh-Type":"extension","X-Fh-Platform":P.platform,"X-Fh-Tz":Intl.DateTimeFormat().resolvedOptions().timeZone};return await fetch(e.url,{...e.options,headers:t,body:e.options.body?JSON.stringify(e.options.body):e.options.body}).then(a=>a.json().then(l=>({status:a.status,data:l})))}),Ae("ga",({data:e})=>{Re.fireEvent(e.name,e.payload,e.uid,e.debug)}),Ae("openSidePanel",async({sender:e})=>{var r;(r=e.tab)!=null&&r.id&&await C.sidePanel.open({tabId:e.tab.id})}),Ae("getAuthToken",async()=>await Q()),C.runtime.onInstalled.addListener(async e=>{e.reason==="install"?C.tabs.create({url:`${Y}/onboarding`}):e.reason==="update"&&e.previousVersion}),C.runtime.setUninstallURL("https://forms.gle/BP3RgWj6fnFoUBEE8"),ge(Tr,async({data:e})=>{const r=await Q(),t={"Content-Type":"application/json",Authorization:r.token?`Bearer ${r.token}`:"","X-Fh-Version":P.version,"X-Fh-Type":"extension","X-Fh-Platform":P.platform,"X-Fh-Tz":Intl.DateTimeFormat().resolvedOptions().timeZone};return await fetch(e.url,{...e.options,headers:t,body:e.options.body?JSON.stringify(e.options.body):e.options.body}).then(async a=>{const l=await a.json();if(a.status===401){const o=await Rr();o.token&&o.token===r.token&&We("",-1)}return{status:a.status,data:l}})}),ge(Sr,({data:e})=>{Re.fireEvent(e.name,e.payload,e.uid,e.debug)}),ge(Ir,async()=>await Q()),ge(Cr,async()=>{const e=await Q(),r={"Content-Type":"application/json",Authorization:e.token?`Bearer ${e.token}`:"","X-Fh-Version":P.version,"X-Fh-Type":"extension","X-Fh-Platform":P.platform,"X-Fh-Tz":Intl.DateTimeFormat().resolvedOptions().timeZone};e.token&&!vr(e.token_ct,new Date)&&fetch(Er,{method:"GET",headers:r}).then(t=>t.json()).then(t=>{var l,o;const n=(l=t.data)==null?void 0:l.token,a=(o=t.data)==null?void 0:o.expire;n&&a&&We(n,a)})});try{C.sidePanel.setPanelBehavior({openPanelOnActionClick:!0})}catch{}C.runtime.onInstalled.addListener(()=>{C.contextMenus.create({id:"selectionDecription",title:"Improve Resume",contexts:["all"]})}),C.contextMenus.onClicked.addListener((e,r)=>{e.menuItemId==="selectionDecription"&&(r!=null&&r.id)&&Pe(Mr,{description:""},{context:"content-script",tabId:r.id})})})();
